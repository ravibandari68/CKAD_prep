Multi-Container Pods are the pods which runs multiple containers that share the same network and storage volumes.

These are of 3 types:
a) Sidecar
b)Adapter
c) Ambassador

Sample YAML file of the multi-container pod: 

```YAML

apiVersion: v1
kind: Pod
metadata:
  name: multi-container-pod
spec:
  containers:
    - name: nginx-container
      image: nginx
      ports:
        - containerPort: 80
    - name: busybox-container
      image: busybox
      command: ['sh', '-c', 'while true; do echo Sidecar running; sleep 10; done']

```

This pod runs:
nginx (main app)
busybox (sidecar for logging or helper tasks)

All the 3 types were defined as same in YAML file, the only difference is their functionality. 

| Pattern    | Role                                      | Example             |
| ---------- | ----------------------------------------- | ------------------- |
| Sidecar    | Add functionality (e.g., logging, config) | Fluentd             |
| Ambassador | Proxy or connect to external service      | Envoy               |
| Adapter    | Format or transform app output            | Prometheus exporter |


Sidecar vs Co-located Containers:

A Sidecar container is a secondary container that runs alongside the main application container within the same Pod. Its primary purpose is to enhance or extend the functionality of the main application without modifying its code. Common use cases include logging, monitoring, proxying, and data synchronization.

```YAML
apiVersion: v1
kind: Pod
metadata:
  name: app-with-logging-sidecar
spec:
  volumes:
    - name: shared-logs
      emptyDir: {}
  initContainers:
    - name: log-shipper
      image: alpine:latest
      command: ['sh', '-c', 'tail -F /opt/logs.txt']
      volumeMounts:
        - name: shared-logs
          mountPath: /opt
      restartPolicy: Always
  containers:
    - name: main-app
      image: alpine:latest
      command: ['sh', '-c', 'while true; do echo "logging" >> /opt/logs.txt; sleep 1; done']
      volumeMounts:
        - name: shared-logs
          mountPath: /opt
```

In this example, the log-shipper sidecar container tails the log file generated by the main-app container. <U> <H4>The shared volume shared-logs facilitates communication between the two containers. </H4> </U>

<H4> Co-Located Containers: </H4>

Co-located containers refer to multiple containers running within the same Pod that collaborate to achieve a common goal. 

```YAML
apiVersion: v1
kind: Pod
metadata:
  name: web-server-with-helper
spec:
  volumes:
    - name: shared-content
      emptyDir: {}
  containers:
    - name: content-generator
      image: busybox
      command: ['sh', '-c', 'echo " Hello from Helper! " > /output/index.html && sleep 3600']
      volumeMounts:
        - name: shared-content
          mountPath: /output
    - name: web-server
      image: nginx
      volumeMounts:
        - name: shared-content
          mountPath: /usr/share/nginx/html

```

Here, the content-generator container creates an HTML file that the web-server container serves using NGINX. Both containers are integral to the application's functionality and operate collaboratively.

<h3>Init Containers: </h3>

A Pod can have multiple containers running apps within it, but it can also have one or more init containers, which are run before the app containers are started.

> If a Pod's init container fails, the kubelet repeatedly restarts that init container until it succeeds. 
